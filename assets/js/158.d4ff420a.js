(window.webpackJsonp=window.webpackJsonp||[]).push([[158],{745:function(e,n,t){"use strict";t.r(n);var s=t(10),r=Object(s.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h3",{attrs:{id:"promise-20-行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#promise-20-行"}},[e._v("#")]),e._v(" Promise - 20 行")]),e._v(" "),t("h4",{attrs:{id:"实现"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实现"}},[e._v("#")]),e._v(" 实现：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("    function myPromise(fn) {\n        this.cbs = [];\n        const resolve = (value) => {\n            setTimeout(() => {\n                this.data = value;\n                this.cbs.forEach(cb => {\n                    cb(value)\n                })\n            })\n        }\n\n        fn(resolve.bind(this))\n    }\n\n    myPromise.prototype.then = function (onResolved) {\n        return new myPromise((resolve) => {\n            this.cbs.push(() => {\n                const ret = onResolved(this.data);\n                if (ret instanceof myPromise) {\n                    ret.then(resolve)\n                } else {\n                    resolve(ret)\n                }\n            })\n        })\n\n    }\n")])])])])}),[],!1,null,null,null);n.default=r.exports}}]);